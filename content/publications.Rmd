---
title: Publications
---

```{r setup, include=FALSE}
library(tidyverse)
library(here)

knitr::opts_chunk$set(echo=FALSE, message = FALSE, warning = FALSE)

```


```{r}
# create the table data
publications <- readxl::read_xlsx(here("_data/publications.xlsx"))

publications_table <- publications %>%
  arrange(desc(year), type) %>%
  mutate(title = ifelse(!is.na(url), str_c("[", title, "](", url, ")"), title)) %>% #turn title into link
  #mutate(title = str_c("<span style='text-decoration: underline'>", title, "</span>")) %>% #underline title
  mutate(award = ifelse(is.na(award), "", str_c(
    "<i class='fas fa-award'></i><em> ", award, "</em> Â·"
  )),
  pdf = ifelse(is.na(pdf), "", str_c(" <span class='pdf-link'>[PDF](pdfs/", pdf, ")</span>"))) %>% 
  mutate(citation = str_c("<span class=pub-title>", title, "</span><br>", 
                                 authors_full, "<br>",
                                 venue, "<br>",
                                 award, pdf,
                                 sep = " ")
           
           ) %>%         
  mutate(citation = str_replace(citation, "Ulrik Lyngs", "_Ulrik Lyngs_")) # make my name bold
```

```{r results='asis'}
# draw a table with heading for each year
years <- publications$year %>% unique()

for (cur_year in years){
  publications_table %>% 
    filter(year == cur_year) %>% 
    select(type, citation) %>%
    knitr::kable(caption = cur_year) %>% 
    print()
}
```

